<!DOCTYPE html><html lang="zh-CN" prefix="og: http://ogp.me/ns#"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>stdlib.h - C 语言教程 - 网道</title><!-- link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" --><link rel="stylesheet" href="../assets/css/app.min.css"><link rel="stylesheet" href="https://apps.bdimg.com/libs/fontawesome/4.4.0/css/font-awesome.css"><!-- link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.css"--><!-- link rel="stylesheet" href="../assets/css/share.min.css" --><meta property="og:type" content="article"><meta property="og:title" content="stdlib.h"><link rel="apple-touch-icon" sizes="57x57" href="../assets/icons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="../assets/icons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="../assets/icons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="../assets/icons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="../assets/icons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="../assets/icons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="../assets/icons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="../assets/icons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="../assets/icons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="../assets/icons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="../assets/icons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="../assets/icons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="../assets/icons/favicon-16x16.png"><link rel="manifest" href="../assets/icons/manifest.json"><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="../assets/icons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"></head><body><nav class="navbar is-light" role="navigation" id="navbar" aria-label="main navigation"><div class="container"><div class="navbar-brand"><a href="/" class="navbar-item title has-text-grey has-text-weight-light is-5">网道 / WangDoc.com </a><a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false"><span aria-hidden="true"></span> <span aria-hidden="true"></span> <span aria-hidden="true"></span></a></div><div class="navbar-menu" id="navMenu"><div class="navbar-end"><div class="navbar-item"><form action="https://sourcegraph.com/search" target="_blank" method="get" onsubmit='this.q.value="repo:^github.com/wangdoc/clang-tutorial$ "+this.origin.value'><p class="control has-icons-right"><input class="input" type="text" name="origin" placeholder="搜索..."> <span class="icon is-small is-right"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path fill="#ddd" d="M23.822 20.88l-6.353-6.354c.93-1.465 1.467-3.2 1.467-5.059.001-5.219-4.247-9.467-9.468-9.467s-9.468 4.248-9.468 9.468c0 5.221 4.247 9.469 9.468 9.469 1.768 0 3.421-.487 4.839-1.333l6.396 6.396 3.119-3.12zm-20.294-11.412c0-3.273 2.665-5.938 5.939-5.938 3.275 0 5.94 2.664 5.94 5.938 0 3.275-2.665 5.939-5.94 5.939-3.274 0-5.939-2.664-5.939-5.939z"/></svg></span></p><input type="hidden" name="q" value=""> <input type="hidden" name="patternType" value="literal"></form></div><a class="navbar-item is-hidden-desktop-only" target="_blank" href="https://github.com/wangdoc/clang-tutorial"><span class="icon" style="color: #333;"><i class="fa fa-lg fa-github"></i></span></a></div></div></div></nav><section class="section main article"><div class="container"><div class="columns"><div class="column is-8 is-6-widescreen is-offset-1-widescreen"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="../index.html"><span class="icon"><i class="fa fa-home"></i></span> &nbsp;C 语言教程</a></li><li><a href="../lib/index.html">标准库</a></li><li class="is-active"><a class="has-text-grey" href="../lib/stdlib.h.html">stdlib.h</a></li></ul></nav><nav class="level level-previous-next is-mobile"><!-- Left side --><div class="level-left"><p class="level-item is-narrow"><a href="../lib/stdint.h.html"><span class="icon"><i class="fa fa-toggle-left"></i></span> stdint.h</a></p></div><div class="level-right"><p class="level-item is-narrow"><a href="../lib/stdio.h.html">stdio.h <span class="icon"><i class="fa fa-toggle-right"></i></span></a></p></div></nav><article class="content"><h1 class="title">stdlib.h</h1><div class="page-meta"><p>网道（WangDoc.com），互联网文档计划</p></div><h2 id="类型别名和宏">类型别名和宏 <a class="markdownIt-Anchor" href="#类型别名和宏">#</a></h2><p>stdlib.h 定义了下面的类型别名。</p><ul><li>size_t：sizeof 的返回类型。</li><li>wchar_t：宽字符类型。</li></ul><p>stdlib.h 定义了下面的宏。</p><ul><li>NULL：空指针。</li><li>EXIT_SUCCESS：函数运行成功时的退出状态。</li><li>EXIT_FAILURE：函数运行错误时的退出状态。</li><li>RAND_MAX：rand() 函数可以返回的最大值。</li><li>MB_CUR_MAX：当前语言环境中，多字节字符占用的最大字节数。</li></ul><h2 id="abslabsllabs">abs()，labs()，llabs() <a class="markdownIt-Anchor" href="#abslabsllabs">#</a></h2><p>这三个函数用于计算整数的绝对值。<code>abs()</code>用于 int 类型，<code>labs()</code>用于 long int 类型，<code>llabs()</code>用于 long long int 类型。</p><pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">abs</span><span class="hljs-params">(<span class="hljs-keyword">int</span> j)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">long</span> <span class="hljs-keyword">int</span> <span class="hljs-title">labs</span><span class="hljs-params">(<span class="hljs-keyword">long</span> <span class="hljs-keyword">int</span> j)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">int</span> <span class="hljs-title">llabs</span><span class="hljs-params">(<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">int</span> j)</span></span>;
</code></pre><p>下面是用法示例。</p><pre class="hljs"><code><span class="hljs-comment">// 输出 |-2| = 2</span>
<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;|-2| = %d\n&quot;</span>, <span class="hljs-built_in">abs</span>(<span class="hljs-number">-2</span>));

<span class="hljs-comment">// 输出 |4|  = 4</span>
<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;|4|  = %d\n&quot;</span>, <span class="hljs-built_in">abs</span>(<span class="hljs-number">4</span>));
</code></pre><h2 id="divldivlldiv">div()，ldiv()，lldiv() <a class="markdownIt-Anchor" href="#divldivlldiv">#</a></h2><p>这三个函数用来计算两个参数的商和余数。<code>div()</code>用于 int 类型的相除，<code>ldiv()</code>用于 long int 类型的相除，<code>lldiv()</code>用于 long long int 类型的相除。</p><pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">div_t</span> <span class="hljs-title">div</span><span class="hljs-params">(<span class="hljs-keyword">int</span> numer, <span class="hljs-keyword">int</span> denom)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">ldiv_t</span> <span class="hljs-title">ldiv</span><span class="hljs-params">(<span class="hljs-keyword">long</span> <span class="hljs-keyword">int</span> numer, <span class="hljs-keyword">long</span> <span class="hljs-keyword">int</span> denom)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">lldiv_t</span> <span class="hljs-title">lldiv</span><span class="hljs-params">(<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">int</span> numer, <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">int</span> denom)</span></span>;
</code></pre><p>这些函数把第2个参数（分母）除以第1个参数（分子），产生商和余数。这两个值通过一个数据结构返回，<code>div()</code>返回 div_t 结构，<code>ldiv()</code>返回 ldiv_t 结构，<code>lldiv()</code>返回 lldiv_t 结构。</p><p>这些结构都包含下面两个字段，</p><pre class="hljs"><code><span class="hljs-keyword">int</span>　quot;　 <span class="hljs-comment">//　商</span>
<span class="hljs-keyword">int</span>　rem;　 <span class="hljs-comment">//　余数</span>
</code></pre><p>它们完整的定义如下。</p><pre class="hljs"><code><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> {</span>
  <span class="hljs-keyword">int</span> quot, rem;
} <span class="hljs-keyword">div_t</span>;
    
<span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> {</span>
  <span class="hljs-keyword">long</span> <span class="hljs-keyword">int</span> quot, rem;
} <span class="hljs-keyword">ldiv_t</span>;
    
<span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> {</span>
  <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">int</span> quot, rem;
} <span class="hljs-keyword">lldiv_t</span>;
</code></pre><p>下面是一个例子。</p><pre class="hljs"><code><span class="hljs-keyword">div_t</span> d = div(<span class="hljs-number">64</span>, <span class="hljs-number">-7</span>);

<span class="hljs-comment">// 输出 64 / -7 = -9</span>
<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;64 / -7 = %d\n&quot;</span>, d.quot);

<span class="hljs-comment">// 输出 64 % -7 = 1</span>
<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;64 %% -7 = %d\n&quot;</span>, d.rem);
</code></pre><h2 id="字符串转成数值">字符串转成数值 <a class="markdownIt-Anchor" href="#字符串转成数值">#</a></h2><h3 id="a-系列函数">a 系列函数 <a class="markdownIt-Anchor" href="#a-系列函数">#</a></h3><p><code>stdlib.h</code>定义了一系列函数，可以将字符串转为数组。</p><ul><li>atoi()：字符串转成 int 类型。</li><li>atof()：字符串转成 double 类型。</li><li>atol()：字符串转成 long int 类型。</li><li>atoll()：字符串转成 long long int 类型。</li></ul><p>它们的原型如下。</p><pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">atoi</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* nptr)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">atof</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* nptr)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">long</span> <span class="hljs-keyword">int</span> <span class="hljs-title">atol</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* nptr)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">int</span> <span class="hljs-title">atoll</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* nptr)</span></span>;
</code></pre><p>上面函数的参数都是一个字符串指针，字符串开头的空格会被忽略，转换到第一个无效字符处停止。函数名称里面的<code>a</code>代表 ASCII，所以<code>atoi()</code>的意思是“ASCII to int”。</p><p>它们返回转换后的数值，如果字符串无法转换，则返回<code>0</code>。</p><p>下面是用法示例。</p><pre class="hljs"><code>atoi(<span class="hljs-string">&quot;3490&quot;</span>)   <span class="hljs-comment">// 3490</span>
atof(<span class="hljs-string">&quot;3.141593&quot;</span>)   <span class="hljs-comment">// 3.141593</span>
</code></pre><p>如果参数是数字开头的字符串，<code>atoi()</code>会只转换数字部分，比如<code>atoi(&quot;42regular&quot;)</code>会返回整数<code>42</code>。如果首字符不是数字，比如“hello world”，则会返回<code>0</code>。</p><h3 id="str-系列函数浮点数转换">str 系列函数（浮点数转换） <a class="markdownIt-Anchor" href="#str-系列函数浮点数转换">#</a></h3><p><code>stdlib.h</code>还定义了一些更强功能的浮点数转换函数。</p><ul><li>strtof()：字符串转成 float 类型。</li><li>strtod()：字符串转成 double 类型。</li><li>strtold()：字符串转成 long double 类型。</li></ul><p>它们的原型如下。</p><pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">float</span> <span class="hljs-title">strtof</span><span class="hljs-params">(
  <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* <span class="hljs-keyword">restrict</span> nptr,
  <span class="hljs-keyword">char</span>** <span class="hljs-keyword">restrict</span> endptr
)</span></span>;

<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">strtod</span><span class="hljs-params">(
  <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* <span class="hljs-keyword">restrict</span> nptr,
  <span class="hljs-keyword">char</span>** <span class="hljs-keyword">restrict</span> endptr
)</span></span>;
    
<span class="hljs-function"><span class="hljs-keyword">long</span> <span class="hljs-keyword">double</span> <span class="hljs-title">strtold</span><span class="hljs-params">(
  <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* <span class="hljs-keyword">restrict</span> nptr,
  <span class="hljs-keyword">char</span>** <span class="hljs-keyword">restrict</span> endptr
)</span></span>;
</code></pre><p>它们都接受两个参数，第一个参数是需要转换的字符串，第二个参数是一个指针，指向原始字符串里面无法转换的部分。</p><ul><li><code>nptr</code>：待转换的字符串（起首的空白字符会被忽略）。</li><li><code>endprt</code>：一个指针，指向不能转换部分的第一个字符。如果字符串可以完全转成数值，该指针指向字符串末尾的终止符<code>\0</code>。这个参数如果设为 NULL，就表示不需要处理字符串剩余部分。</li></ul><p>它们的返回值是已经转换后的数值。如果字符串无法转换，则返回<code>0</code>。如果转换结果发生溢出，errno 会被设置为 ERANGE。如果值太大（无论是正数还是负数），函数返回<code>HUGE_VAL</code>；如果值太小，函数返回零。</p><pre class="hljs"><code><span class="hljs-keyword">char</span> *inp = <span class="hljs-string">&quot;   123.4567abdc&quot;</span>;
<span class="hljs-keyword">char</span> *badchar;

<span class="hljs-keyword">double</span> val = strtod(inp, &amp;badchar);

<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%f\n&quot;</span>, val); <span class="hljs-comment">// 123.456700</span>
<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s\n&quot;</span>, badchar); <span class="hljs-comment">// abdc</span>
</code></pre><p>字符串可以完全转换的情况下，第二个参数指向<code>\0</code>，因此可以用下面的写法判断是否完全转换。</p><pre class="hljs"><code><span class="hljs-keyword">if</span> (*endptr == <span class="hljs-string">&#x27;\0&#x27;</span>) {
  <span class="hljs-comment">// 完全转换</span>
} <span class="hljs-keyword">else</span> {
  <span class="hljs-comment">// 存在无法转换的字符</span>
}
</code></pre><p>如果不关心没有转换的部分，则可以将 endptr 设置为 NULL。</p><p>这些函数还可以将字符串转换为特殊值 Infinity 和 NaN。如果字符串包含 INF 或 INFINITY（大写或小写皆可），则将转换为 Infinity；如果字符串包含 NAN，则将返回 NaN。</p><h3 id="str-系列函数整数转换">str 系列函数（整数转换） <a class="markdownIt-Anchor" href="#str-系列函数整数转换">#</a></h3><p>str 系列函数也有整数转换的对应函数。</p><ul><li>strtol()：字符串转成 long int 类型。</li><li>strtoll()：字符串转成 long long int 类型。</li><li>strtoul()：字符串转成 unsigned long int 类型。</li><li>strtoull()：字符串转成 unsigned long long int 类型。</li></ul><p>它们的原型如下。</p><pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">long</span> <span class="hljs-keyword">int</span> <span class="hljs-title">strtol</span><span class="hljs-params">(
  <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* <span class="hljs-keyword">restrict</span> nptr,
  <span class="hljs-keyword">char</span>** <span class="hljs-keyword">restrict</span> endptr,
  <span class="hljs-keyword">int</span> base
)</span></span>;
    
<span class="hljs-function"><span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">int</span> <span class="hljs-title">strtoll</span><span class="hljs-params">(
  <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* <span class="hljs-keyword">restrict</span> nptr,
  <span class="hljs-keyword">char</span>** <span class="hljs-keyword">restrict</span> endptr,
  <span class="hljs-keyword">int</span> base
)</span></span>;
    
<span class="hljs-function"><span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">int</span> <span class="hljs-title">strtoul</span><span class="hljs-params">(
  <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* <span class="hljs-keyword">restrict</span> nptr,
  <span class="hljs-keyword">char</span>** <span class="hljs-keyword">restrict</span> endptr,
  <span class="hljs-keyword">int</span> base
)</span></span>;
    
<span class="hljs-function"><span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">int</span> <span class="hljs-title">strtoull</span><span class="hljs-params">(
  <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* <span class="hljs-keyword">restrict</span> nptr,
  <span class="hljs-keyword">char</span>** <span class="hljs-keyword">restrict</span> endptr, <span class="hljs-keyword">int</span> base
)</span></span>;
</code></pre><p>它们接受三个参数。</p><p>（1）<code>nPtr</code>：待转换的字符串（起首的空白字符会被忽略）。</p><p>（2）<code>endPrt</code>：一个指针，指向不能转换部分的第一个字符。如果字符串可以完全转成数值，该指针指向字符串末尾的终止符<code>\0</code>。这个参数如果设为 NULL，就表示不需要处理字符串剩余部分。</p><p>（3）<code>base</code>：待转换整数的进制。这个值应该是<code>2</code>到<code>36</code>之间的整数，代表相应的进制，如果是特殊值<code>0</code>，表示让函数根据数值的前缀，自己确定进制，即如果数字有前缀<code>0</code>，则为八进制，如果数字有前缀<code>0x</code>或<code>0X</code>，则为十六进制。</p><p>它们的返回值是转换后的数值，如果转换不成功，返回<code>0</code>。</p><p>下面是转换十进制整数的例子。</p><pre class="hljs"><code><span class="hljs-keyword">char</span>* s = <span class="hljs-string">&quot;3490&quot;</span>;
<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">int</span> x = strtoul(u, <span class="hljs-literal">NULL</span>, <span class="hljs-number">10</span>);

<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lu\n&quot;</span>, x); <span class="hljs-comment">// 3490</span>
</code></pre><p>下面是转换十六进制整数的例子。</p><pre class="hljs"><code><span class="hljs-keyword">char</span>* end;

<span class="hljs-keyword">long</span> value = strtol(<span class="hljs-string">&quot;0xff&quot;</span>, &amp;end, <span class="hljs-number">16</span>);
<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%ld\n&quot;</span>, value); <span class="hljs-comment">// 255</span>
<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s\n&quot;</span>, end); <span class="hljs-comment">// 无内容</span>

value = strtol(<span class="hljs-string">&quot;0xffxx&quot;</span>, &amp;end, <span class="hljs-number">16</span>);
<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%ld\n&quot;</span>, value); <span class="hljs-comment">// 255</span>
<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s\n&quot;</span>, end); <span class="hljs-comment">// xx</span>
</code></pre><p>上面示例中，<code>strtol()</code>可以指定字符串包含的是16进制整数。不能转换的部分，可以使用指针<code>end</code>进行访问。</p><p>下面是转换二进制整数的例子。</p><pre class="hljs"><code><span class="hljs-keyword">char</span>* s = <span class="hljs-string">&quot;101010&quot;</span>;
<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">int</span> x = strtoul(s, <span class="hljs-literal">NULL</span>, <span class="hljs-number">2</span>);

<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lu\n&quot;</span>, x); <span class="hljs-comment">// 42</span>
</code></pre><p>下面是让函数自行判断整数进制的例子。</p><pre class="hljs"><code><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span> </span>{
  <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* <span class="hljs-built_in">string</span> = <span class="hljs-string">&quot;-1234567abc&quot;</span>;
  <span class="hljs-keyword">char</span>* remainderPtr;
  <span class="hljs-keyword">long</span> x = strtol(<span class="hljs-built_in">string</span>, &amp;remainderPtr, <span class="hljs-number">0</span>);
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s\&quot;%s\&quot;\n%s%ld\n%s\&quot;%s\&quot;\n&quot;</span>,
    <span class="hljs-string">&quot;The original string is &quot;</span>,
    <span class="hljs-built_in">string</span>,
    <span class="hljs-string">&quot;The converted value is &quot;</span>,
    x,
    <span class="hljs-string">&quot;The remainder of the original string is &quot;</span>,
    remainderPtr
  );
}
</code></pre><p>上面代码的输出结果如下。</p><pre class="hljs"><code>The original <span class="hljs-built_in">string</span> is <span class="hljs-string">&quot;-1234567abc&quot;</span>
The converted value is <span class="hljs-number">-1234567</span>
The remainder of the original <span class="hljs-built_in">string</span> is <span class="hljs-string">&quot;abc&quot;</span>
</code></pre><p>如果被转换的值太大，<code>strtol()</code>函数在<code>errno</code>中存储<code>ERANGE</code>这个值，并返回<code>LONG_MIN</code>（原值为负数）或<code>LONG_MAX</code>（原值为正数），<code>strtoul()</code>则返回<code>ULONG_MAX</code>。</p><h2 id="rand">rand() <a class="markdownIt-Anchor" href="#rand">#</a></h2><p><code>rand()</code>函数用来生成 0～RAND_MAX 之间的随机整数。<code>RAND_MAX</code>是一个定义在<code>stdlib.h</code>里面的宏，通常等于 INT_MAX。</p><pre class="hljs"><code><span class="hljs-comment">// 原型</span>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">rand</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>;

<span class="hljs-comment">// 示例</span>
<span class="hljs-keyword">int</span> x = rand();
</code></pre><p>如果希望获得整数 N 到 M 之间的随机数（包括 N 和 M 两个端点值），可以使用下面的写法。</p><pre class="hljs"><code><span class="hljs-keyword">int</span> x = rand() % （M - N + <span class="hljs-number">1</span>) + N;
</code></pre><p>比如，1 到 6 之间的随机数，写法如下。</p><pre class="hljs"><code><span class="hljs-keyword">int</span> x = rand() % <span class="hljs-number">6</span> + <span class="hljs-number">1</span>;
</code></pre><p>获得浮点数的随机值，可以使用下面的写法。</p><pre class="hljs"><code><span class="hljs-comment">// 0 到 0.999999 之间的随机数</span>
<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;0 to 0.99999: %f\n&quot;</span>, rand() / ((<span class="hljs-keyword">float</span>)RAND_MAX + <span class="hljs-number">1</span>));

<span class="hljs-comment">// n 到 m 之间的随机数：</span>
<span class="hljs-comment">// n + m * (rand() / (float)RAND_MAX)</span>
<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;10.5 to 15.7: %f\n&quot;</span>, <span class="hljs-number">10.5</span> + <span class="hljs-number">5.2</span> * rand() / (<span class="hljs-keyword">float</span>)RAND_MAX);
</code></pre><p>上面示例中，由于<code>rand()</code>和<code>RAND_MAX</code>都是 int 类型，要用显示的类型转换转为浮点数。</p><h2 id="srand">srand() <a class="markdownIt-Anchor" href="#srand">#</a></h2><p><code>rand()</code>是伪随机数函数，为了增加随机性，必须在调用它之前，使用<code>srand()</code>函数重置一下种子值。</p><p><code>srand()</code>函数接受一个无符号整数（unsigned int）作为种子值，没有返回值。</p><pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">srand</span><span class="hljs-params">(<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> seed)</span></span>;
</code></pre><p>通常使用<code>time(NULL)</code>函数返回当前距离时间纪元的秒数，作为<code>srand()</code>的参数。</p><pre class="hljs"><code><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;time.h&gt;</span></span>
srand((<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span>) time(<span class="hljs-literal">NULL</span>));
</code></pre><p>上面代码中，<code>time()</code>的原型定义在头文件<code>time.h</code>里面，返回值的类型是类型别名<code>time_t</code>，具体的类型与系统有关，所以要强制转换一下类型。<code>time()</code>的参数是一个指针，指向一个具体的 time_t 类型的时间值，这里传入空指针<code>NULL</code>作为参数，由于 NULL 一般是<code>0</code>，所以也可以写成<code>time(0)</code>。</p><h2 id="abort">abort() <a class="markdownIt-Anchor" href="#abort">#</a></h2><p><code>abort()</code>用于不正常地终止一个正在执行的程序。使用这个函数的目的，主要是它会触发 SIGABRT 信号，开发者可以在程序中为这个信号设置一个处理函数。</p><pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">abort</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>;
</code></pre><p>该函数没有参数。</p><h2 id="exitquick_exit_exit">exit()，quick_exit()，_Exit() <a class="markdownIt-Anchor" href="#exitquick_exit_exit">#</a></h2><p>这三个函数都用来退出当前正在执行的程序。</p><pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">exit</span><span class="hljs-params">(<span class="hljs-keyword">int</span> status)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">quick_exit</span><span class="hljs-params">(<span class="hljs-keyword">int</span> status)</span></span>;
<span class="hljs-keyword">void</span> _Exit(<span class="hljs-keyword">int</span> status);
</code></pre><p>它们都接受一个整数，表示程序的退出状态，<code>0</code>是正常退出，非零值表示发生错误，可以使用宏<code>EXIT_SUCCESS</code>和<code>EXIT_FAILURE</code>当作参数。它们本身没有返回值。</p><p>它们的区别是，退出时所做的清理工作不同。<code>exit()</code>是正常退出，系统会做完整的清理，比如更新所有文件流，并且删除临时文件。<code>quick_exit()</code>是快速退出，系统的清理工作稍微少一点。<code>_Exit()</code>是立即退出，不做任何清理工作。</p><p>下面是一些用法示例。</p><pre class="hljs"><code><span class="hljs-built_in">exit</span>(EXIT_SUCCESS);
quick_exit(EXIT_FAILURE);
_Exit(<span class="hljs-number">2</span>);
</code></pre><h2 id="atexitat_quick_exit">atexit()，at_quick_exit() <a class="markdownIt-Anchor" href="#atexitat_quick_exit">#</a></h2><p><code>atexit()</code>用来登记当前程序退出时（调用<code>exit()</code>或<code>main()</code>正常退出），所要执行的其他函数。</p><p><code>at_quick_exit()</code>则是登记使用<code>quick_exit()</code>方法退出当前程序时，所要执行的其他函数。</p><p><code>exit()</code>只能触发<code>atexit()</code>登记的函数，<code>quick_exit()</code>只能触发<code>at_quick_exit()</code>登记的函数。</p><pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">atexit</span><span class="hljs-params">(<span class="hljs-keyword">void</span> (*func)(<span class="hljs-keyword">void</span>))</span></span>;
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">at_quick_exit</span><span class="hljs-params">(<span class="hljs-keyword">void</span> (*func)(<span class="hljs-keyword">void</span>))</span></span>;
</code></pre><p>它们的参数是要执行的函数地址，即函数名。它们的返回值都是调用成功时返回<code>0</code>，调用失败时返回非零值。</p><p>下面是一个例子。</p><pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">sign_off</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">too_bad</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>;

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span> </span>{

  <span class="hljs-keyword">int</span> n;
  atexit(sign_off);　　 <span class="hljs-comment">/* 注册 sign_off()函数 */</span>

  <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;Enter an integer:&quot;</span>);
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;n) != <span class="hljs-number">1</span>) {
    <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;That&#x27;s no integer!&quot;</span>);
    atexit(too_bad);　<span class="hljs-comment">/* 注册 too_bad()函数 */</span>
    <span class="hljs-built_in">exit</span>(EXIT_FAILURE);
  }

  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d is %s.\n&quot;</span>, n, (n % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>) ? <span class="hljs-string">&quot;even&quot;</span> : <span class="hljs-string">&quot;odd&quot;</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">sign_off</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span> </span>{
  <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;sign_off&quot;</span>);
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">too_bad</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span> </span>{
  <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;too bad&quot;</span>);
}
</code></pre><p>上面示例中，用户输入失败时，会调用<code>sign_off()</code>和<code>too_bad()</code>函数；但是输入成功时只会调用<code>sign_off()</code>。因为只有输入失败时，才会进入<code>if</code>语句登记<code>too_bad()</code>。</p><p>另外，如果有多条<code>atexit()</code>语句，函数退出时最先调用的，是最后一个登记的函数。</p><p><code>atexit()</code>登记的函数（如上例的<code>sign_off</code>和<code>too_bad</code>）应该不带任何参数且返回类型为<code>void</code>。通常，这些函数会执行一些清理任务，例如删除临时文件或重置环境变量。</p><p><code>at_quick_exit()</code>也是同样的规则，下面是一个例子。</p><pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">exit_handler_1</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span> </span>{
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;1\n&quot;</span>);
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">exit_handler_2</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span> </span>{
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;2\n&quot;</span>);
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span> </span>{
  at_quick_exit(exit_handler_1);
  at_quick_exit(exit_handler_2);
  quick_exit(<span class="hljs-number">0</span>);
}
</code></pre><p>执行上面的示例，命令行会先输出2，再输出1。</p><h2 id="getenv">getenv() <a class="markdownIt-Anchor" href="#getenv">#</a></h2><p><code>getenv()</code>用于获取环境变量的值。环境变量是操作系统提供的程序之外的一些环境参数。</p><pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">char</span>* <span class="hljs-title">getenv</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* name)</span></span>;
</code></pre><p>它的参数是一个字符串，表示环境变量名。返回值也是一个字符串，表示环境变量的值。如果指定的环境变量不存在，则返回 NULL。</p><p>下面是输出环境变量<code>$PATH</code>的值的例子。</p><pre class="hljs"><code><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;PATH is %s\n&quot;</span>, getenv(<span class="hljs-string">&quot;PATH&quot;</span>));
</code></pre><h2 id="system">system() <a class="markdownIt-Anchor" href="#system">#</a></h2><p><code>system()</code>函数用于执行外部程序。它会把它的参数字符串传递给操作系统，让操作系统的命令处理器来执行。</p><pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">system</span><span class="hljs-params">( <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> * command )</span></span>;
</code></pre><p>这个函数的返回值因编译器而异。但是标准规定，如果 NULL 作为参数，表示询问操作系统，是否有可用的命令处理器，如果有的话，返回一个非零值，否则返回零。</p><p>下面是执行<code>ls</code>命令的例子。</p><pre class="hljs"><code>system(<span class="hljs-string">&quot;ls -l&quot;</span>); 
</code></pre><h2 id="内存管理函数">内存管理函数 <a class="markdownIt-Anchor" href="#内存管理函数">#</a></h2><p>stdlib.h 提供了一些内存操作函数，下面几个函数详见《内存管理》一章，其余在本节介绍。</p><ul><li>malloc()：分配内存区域</li><li>calloc()：分配内存区域。</li><li>realloc()：调节内存区域大小。</li><li>free()：释放内存区域。</li></ul><h3 id="aligned_alloc">aligned_alloc() <a class="markdownIt-Anchor" href="#aligned_alloc">#</a></h3><p>很多系统有内存对齐的要求，即内存块的大小必须是某个值（比如64字节）的倍数，这样有利于提高处理速度。<code>aligned_alloc()</code>就用于分配满足内存对齐要求的内存块，它的原型如下。</p><pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">void</span>* <span class="hljs-title">aligned_alloc</span><span class="hljs-params">(<span class="hljs-keyword">size_t</span> alignment, <span class="hljs-keyword">size_t</span> size)</span></span>;
</code></pre><p>它接受两个参数。</p><ul><li>alignment：整数，表示内存对齐的单位大小，一般是2的整数次幂（2、4、8、16……）。</li><li>size：整数，表示内存块的大小。</li></ul><p>分配成功时，它返回一个无类型指针，指向新分配的内存块。分配失败时，返回 NULL。</p><pre class="hljs"><code><span class="hljs-keyword">char</span>* p = aligned_alloc(<span class="hljs-number">64</span>, <span class="hljs-number">256</span>);
</code></pre><p>上面示例中，<code>aligned_alloc()</code>分配的内存块，单位大小是64字节，要分配的字节数是256字节。</p><h2 id="qsort">qsort() <a class="markdownIt-Anchor" href="#qsort">#</a></h2><p><code>qsort()</code>用来快速排序一个数组。它对数组成员的类型没有要求，任何类型数组都可以用这个函数排序。</p><pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">qsort</span><span class="hljs-params">(
  <span class="hljs-keyword">void</span> *base,
  <span class="hljs-keyword">size_t</span> nmemb, 
  <span class="hljs-keyword">size_t</span> size,
  <span class="hljs-keyword">int</span> (*compar)(<span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span> *, <span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span> *)
)</span></span>;
</code></pre><p>该函数接受四个参数。</p><ul><li>base：指向要排序的数组开始位置的指针。</li><li>nmemb：数组成员的数量。</li><li>size：数组每个成员占用的字节长度。</li><li>compar：一个函数指针，指向一个比较两个成员的函数。</li></ul><p>比较函数<code>compar</code>将指向数组两个成员的指针作为参数，并比较两个成员。如果第一个参数小于第二个参数，该函数应该返回一个负值；如果两个函数相等，返回<code>0</code>；如果第一个参数大于第二个参数，应该返回一个正数。</p><p>下面是一个用法示例。</p><pre class="hljs"><code><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">compar</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span>* elem0, <span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span>* elem1)</span> </span>{
  <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span>* x = elem0;
  <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span>* y = elem1; 
  
  <span class="hljs-keyword">return</span> *x - *y;
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span> </span>{
  <span class="hljs-keyword">int</span> a[<span class="hljs-number">9</span>] = {<span class="hljs-number">14</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">17</span>, <span class="hljs-number">10</span>, <span class="hljs-number">8</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>, <span class="hljs-number">13</span>};

  qsort(a, <span class="hljs-number">9</span>, <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">int</span>), compar);

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">9</span>; i++)
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, a[i]);
  <span class="hljs-built_in">putchar</span>(<span class="hljs-string">&#x27;\n&#x27;</span>);
}
</code></pre><p>执行上面示例，会输出排序好的数组“1 2 3 6 8 10 13 14 17”。</p><h2 id="bsearch">bsearch() <a class="markdownIt-Anchor" href="#bsearch">#</a></h2><p><code>bsearch()</code>使用二分法搜索，在数组中搜索一个值。它对数组成员的类型没有要求，任何类型数组都可以用这个函数搜索值。</p><p>注意，该方法只对已经排序好的数组有效。</p><pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">void</span> *<span class="hljs-title">bsearch</span><span class="hljs-params">(
  <span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span>* key,
  <span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span>* base,
  <span class="hljs-keyword">size_t</span> nmemb,
  <span class="hljs-keyword">size_t</span> size,
  <span class="hljs-keyword">int</span> (*compar)(<span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span> *, <span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span> *)
)</span></span>;
</code></pre><p>这个函数接受5个参数。</p><ul><li>key：指向要查找的值的指针。</li><li>base：指向数组开始位置的指针，数组必须已经排序。</li><li>nmemb：数组成员的数量。</li><li>size：数组每个成员占用的字节长度。</li><li>compar：指向一个将待查找值与其他值进行比较的函数的指针。</li></ul><p>比较函数<code>compar</code>将待查找的值作为第一个参数，将要比较的值作为第二个参数。如果第一个参数小于第二个参数，该函数应该返回一个负值；如果两个参数相等，返回<code>0</code>；如果第一个参数大于第二个参数，返回一个正值。</p><p>如果找到待查找的值，<code>bsearch()</code>返回指向该值的指针，如果找不到，返回 NULL。</p><p>下面是一个用法示例。</p><pre class="hljs"><code><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">compar</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span> *key, <span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span> *value)</span> </span>{
  <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span>* k = key;
  <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span>* v = value;

  <span class="hljs-keyword">return</span> *k - *v;
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span> </span>{
  <span class="hljs-keyword">int</span> a[<span class="hljs-number">9</span>] = {<span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">9</span>, <span class="hljs-number">12</span>, <span class="hljs-number">13</span>, <span class="hljs-number">18</span>, <span class="hljs-number">20</span>, <span class="hljs-number">32</span>, <span class="hljs-number">47</span>};

  <span class="hljs-keyword">int</span>* r;
  <span class="hljs-keyword">int</span> key;

  key = <span class="hljs-number">12</span>; <span class="hljs-comment">// 包括在数组中</span>
  r = bsearch(&amp;key, a, <span class="hljs-number">9</span>, <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">int</span>), compar);
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Found %d\n&quot;</span>, *r);

  key = <span class="hljs-number">30</span>;  <span class="hljs-comment">// 不包括在数组中</span>
  r = bsearch(&amp;key, a, <span class="hljs-number">9</span>, <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">int</span>), compar);
  <span class="hljs-keyword">if</span> (r == <span class="hljs-literal">NULL</span>)
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Didn&#x27;t find 30\n&quot;</span>);

  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre><p>执行上面的示例，会输出下面的结果。</p><pre class="hljs"><code>Found 12
Didn<span class="hljs-string">&#x27;t find 30
</span></code></pre><h2 id="多字节字符函数">多字节字符函数 <a class="markdownIt-Anchor" href="#多字节字符函数">#</a></h2><p>stdlib.h 提供了下面的函数，用来操作多字节字符，详见《多字节字符》一章。</p><ul><li>mblen()：多字节字符的字节长度。</li><li>mbtowc()：将多字节字符转换为宽字符。</li><li>wctomb()：将宽字符转换为多字节字符。</li><li>mbstowcs()：将多字节字符串转换为宽字符串。</li><li>wcstombs()：将宽字符串转换为多字节字符串。</li></ul></article><nav class="level level-previous-next is-mobile"><!-- Left side --><div class="level-left"><p class="level-item is-narrow"><a href="../lib/stdint.h.html"><span class="icon"><i class="fa fa-toggle-left"></i></span> stdint.h</a></p></div><div class="level-right"><p class="level-item is-narrow"><a href="../lib/stdio.h.html">stdio.h <span class="icon"><i class="fa fa-toggle-right"></i></span></a></p></div></nav><div class="page-info"><p>本教程采用<a href="https://creativecommons.org/licenses/by-sa/3.0/deed.zh" target="_blank">知识共享 署名-相同方式共享 3.0协议</a>。</p><p>分享本文 <span class="social-share"></span></p></div></div><div class="column is-3 is-offset-1"><nav class="panel panel-menu"><p class="panel-heading"><i class="fa fa-book" aria-hidden="true"></i> C 语言教程</p><div class="panel-block"><aside class="menu"><p class="menu-label"></p><ul class="menu-list"><li><a href="../intro.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">简介</span></a></li><li><a href="../syntax.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">基本语法</span></a></li><li><a href="../variable.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">变量</span></a></li><li><a href="../operator.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">运算符</span></a></li><li><a href="../flow-control.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">流程控制</span></a></li><li><a href="../types.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">数据类型</span></a></li><li><a href="../pointer.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">指针</span></a></li><li><a href="../function.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">函数</span></a></li><li><a href="../array.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">数组</span></a></li><li><a href="../string.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">字符串</span></a></li><li><a href="../memory.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">内存管理</span></a></li><li><a href="../struct.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">struct 结构</span></a></li><li><a href="../typedef.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">typedef 命令</span></a></li><li><a href="../union.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">Union 结构</span></a></li><li><a href="../enum.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">Enum 类型</span></a></li><li><a href="../preprocessor.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">预处理器</span></a></li><li><a href="../io.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">I/O 函数</span></a></li><li><a href="../file.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">文件操作</span></a></li><li><a href="../specifier.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">变量说明符</span></a></li><li><a href="../multifile.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">多文件项目</span></a></li><li><a href="../cli.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">命令行环境</span></a></li><li><a href="../multibyte.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">多字节字符</span></a></li><li><a href="../lib/index.html"><span class="icon"><i class="fa fa-caret-down"></i> </span><i class="fa folder fa-folder-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">标准库</span></a><ul><li><a href="../lib/assert.h.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">assert.h</span></a></li><li><a href="../lib/ctype.h.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">ctype.h</span></a></li><li><a href="../lib/errno.h.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">errno.h</span></a></li><li><a href="../lib/float.h.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">float.h</span></a></li><li><a href="../lib/inttypes.h.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">inttypes.h</span></a></li><li><a href="../lib/iso646.h.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">iso646.h</span></a></li><li><a href="../lib/limits.h.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">limits.h</span></a></li><li><a href="../lib/locale.h.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">locale.h</span></a></li><li><a href="../lib/math.h.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">math.h</span></a></li><li><a href="../lib/signal.h.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">signal.h</span></a></li><li><a href="../lib/stdint.h.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">stdint.h</span></a></li><li><a href="../lib/stdlib.h.html" class="is-active"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">stdlib.h</span></a></li><li><a href="../lib/stdio.h.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">stdio.h</span></a></li><li><a href="../lib/string.h.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">string.h</span></a></li><li><a href="../lib/time.h.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">time.h</span></a></li><li><a href="../lib/wchar.h.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">wchar.h</span></a></li><li><a href="../lib/wctype.h.html"><span class="icon"></span> <i class="fa fa-file-text-o" aria-hidden="true" style="width: 14px;"></i> &nbsp; <span class="menu-list-title">wctype.h</span></a></li></ul></li></ul></aside></div></nav><nav class="panel panel-info"><p class="panel-heading"><i class="fa fa-link" aria-hidden="true"></i> 链接</p><div class="panel-block"><aside class="menu"><p class="menu-label"></p><ul class="menu-list"><li><a href="https://raw.githubusercontent.com/wangdoc/clang-tutorial/master/docs/lib/stdlib.h.md" target="_blank"><span class="icon"></span><i class="fa fa-code" aria-hidden="true" style="width: 14px;"></i>&nbsp;本文源码</a></li><li><a href="https://github.com/wangdoc/clang-tutorial" target="_blank"><span class="icon"></span><i class="fa fa-hdd-o" aria-hidden="true" style="width: 14px;"></i>&nbsp;代码仓库</a></li><li><a href="https://github.com/wangdoc/clang-tutorial/issues" target="_blank"><span class="icon"></span><i class="fa fa-flag-o" aria-hidden="true" style="width: 14px;"></i>&nbsp;反馈</a></li></ul></aside></div></nav></div></div><div class="columns"><div class="column is-8 is-6-widescreen is-offset-1-widescreen"><div id="disqus_thread"></div></div></div></div></section><footer class="footer"><div class="container"><div class="content has-text-centered"><p>联系：contact@wangdoc.com</p></div></div></footer><script>var LOPPO={current_path:"lib/stdlib.h.md",relative_root_path:"../",article_toc:'<ul class="markdownIt-TOC">\n<li><a href="#%E7%B1%BB%E5%9E%8B%E5%88%AB%E5%90%8D%E5%92%8C%E5%AE%8F">类型别名和宏</a></li>\n<li><a href="#abslabsllabs">abs()，labs()，llabs()</a></li>\n<li><a href="#divldivlldiv">div()，ldiv()，lldiv()</a></li>\n<li><a href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E6%88%90%E6%95%B0%E5%80%BC">字符串转成数值</a>\n<ul>\n<li><a href="#a-%E7%B3%BB%E5%88%97%E5%87%BD%E6%95%B0">a 系列函数</a></li>\n<li><a href="#str-%E7%B3%BB%E5%88%97%E5%87%BD%E6%95%B0%E6%B5%AE%E7%82%B9%E6%95%B0%E8%BD%AC%E6%8D%A2">str 系列函数（浮点数转换）</a></li>\n<li><a href="#str-%E7%B3%BB%E5%88%97%E5%87%BD%E6%95%B0%E6%95%B4%E6%95%B0%E8%BD%AC%E6%8D%A2">str 系列函数（整数转换）</a></li>\n</ul>\n</li>\n<li><a href="#rand">rand()</a></li>\n<li><a href="#srand">srand()</a></li>\n<li><a href="#abort">abort()</a></li>\n<li><a href="#exitquick_exit_exit">exit()，quick_exit()，_Exit()</a></li>\n<li><a href="#atexitat_quick_exit">atexit()，at_quick_exit()</a></li>\n<li><a href="#getenv">getenv()</a></li>\n<li><a href="#system">system()</a></li>\n<li><a href="#%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E5%87%BD%E6%95%B0">内存管理函数</a>\n<ul>\n<li><a href="#aligned_alloc">aligned_alloc()</a></li>\n</ul>\n</li>\n<li><a href="#qsort">qsort()</a></li>\n<li><a href="#bsearch">bsearch()</a></li>\n<li><a href="#%E5%A4%9A%E5%AD%97%E8%8A%82%E5%AD%97%E7%AC%A6%E5%87%BD%E6%95%B0">多字节字符函数</a></li>\n</ul>\n'}</script><script src="../assets/js/app.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-111269443-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-111269443-1")</script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?5eec262881855af3dede6a71234571f6";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script>var disqus_config=function(){var t=window.location,e=t.protocol+"//"+t.host+(t.port?":"+t.port:"")+t.pathname;this.page.url=e,this.page.identifier=t.pathname};!function(){var t=document,e=t.createElement("script");e.src="https://wangdoc-clang.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><!--script src="../assets/js/social-share.min.js"--><!--/script--><script>var shareDesc="我正在阅读《stdlib.h》，出自网道（WangDoc.com）的《C 语言教程》。",shareOpts={url:window.location.href,source:shareDesc,title:shareDesc,description:"",image:"",sites:["weibo","wechat","qq","qzone","twitter","facebook"],origin:"WangDoc_com",disabled:[],wechatQrcodeTitle:"微信",wechatQrcodeHelper:"扫一下二维码，分享到微信。"};socialShare(".social-share",shareOpts)</script></body></html>